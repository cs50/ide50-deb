cwdBasename () {
    TITLE="${PWD##*/}"

    if [ "$PWD" == "$HOME" ] ; then
        TITLE="~"
    fi

    echo -n "${TITLE}/"
}

PS1='\[$(printf "\x0f")\033[01;34m\]\w/\[\033[00m\]$(__git_ps1 " (%s)") $ '

case "$TERM" in
xterm*|rxvt*|screen*)
    PS1='\[\e]0;\a\033k$(cwdBasename)\033\\\]'"$PS1"
    ;;
*)
    ;;
esac
